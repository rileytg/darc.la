!function(){"use strict";function a(){if(l){requestAnimFrame(a);for(var b=0,c=k.length;c>b;b++)k[b].update()}}function b(b,e){if(!b.nodeName||/^(ul|li)$/i.test(b.nodeName)===!1)return!1;d(b)&&c(b);var f=j?new h(b):new g(b);e&&e.live&&(f.syncInterval=setInterval(function(){f.sync.call(f)},i)),f.sync(),k.push(f),1===k.length&&(l=!0,a())}function c(a){for(var b=0;b<k.length;b++){var c=k[b];c.element==a&&(c.destroy(),k.splice(b,1),b--)}0===k.length&&(l=!1)}function d(a){for(var b=0,c=k.length;c>b;b++)if(k[b].element==a)return!0;return!1}function e(a,b,c){var d,e;if("string"==typeof a){var f=document.querySelectorAll(a);for(d=0,e=f.length;e>d;d++)b.call(null,f[d],c)}else if("object"==typeof a&&"number"==typeof a.length)for(d=0,e=a.length;e>d;d++)b.call(null,a[d],c);else{if(!a.nodeName)throw"Stroll target was of unexpected type.";b.call(null,a,c)}}function f(){return!!document.body.classList}function g(a){this.element=a}function h(a){this.element=a,this.element.style.overflow="hidden",this.top={value:0,natural:0},this.touch={value:0,offset:0,start:0,previous:0,lastMove:Date.now(),accellerateTimeout:-1,isAccellerating:!1,isActive:!1},this.velocity=0}var i=500,j=!!("ontouchstart"in window),k=[],l=!1;g.prototype.sync=function(){this.items=Array.prototype.slice.apply(this.element.children),this.listHeight=this.element.offsetHeight;for(var a=0,b=this.items.length;b>a;a++){var c=this.items[a];c._offsetHeight=c.offsetHeight,c._offsetTop=c.offsetTop,c._offsetBottom=c._offsetTop+c._offsetHeight,c._state=""}this.update(!0)},g.prototype.update=function(a){var b=this.element.pageYOffset||this.element.scrollTop,c=b+this.listHeight;if(b!==this.lastTop||a){this.lastTop=b;for(var d=0,e=this.items.length;e>d;d++){var f=this.items[d];f._offsetBottom<b?"past"!==f._state&&(f._state="past",f.classList.add("past"),f.classList.remove("future")):f._offsetTop>c?"future"!==f._state&&(f._state="future",f.classList.add("future"),f.classList.remove("past")):f._state&&("past"===f._state&&f.classList.remove("past"),"future"===f._state&&f.classList.remove("future"),f._state="")}}},g.prototype.destroy=function(){clearInterval(this.syncInterval);for(var a=0,b=this.items.length;b>a;a++){var c=this.items[a];c.classList.remove("past"),c.classList.remove("future")}},h.prototype=new g,h.prototype.sync=function(){this.items=Array.prototype.slice.apply(this.element.children),this.listHeight=this.element.offsetHeight;for(var a,b=0,c=this.items.length;c>b;b++)a=this.items[b],a._offsetHeight=a.offsetHeight,a._offsetTop=a.offsetTop,a._offsetBottom=a._offsetTop+a._offsetHeight,a._state="",a.style.opacity=1;this.top.natural=this.element.scrollTop,this.top.value=this.top.natural,this.top.max=a._offsetBottom-this.listHeight,this.update(!0),this.bind()},h.prototype.bind=function(){var a=this;this.touchStartDelegate=function(b){a.onTouchStart(b)},this.touchMoveDelegate=function(b){a.onTouchMove(b)},this.touchEndDelegate=function(b){a.onTouchEnd(b)},this.element.addEventListener("touchstart",this.touchStartDelegate,!1),this.element.addEventListener("touchmove",this.touchMoveDelegate,!1),this.element.addEventListener("touchend",this.touchEndDelegate,!1)},h.prototype.onTouchStart=function(a){if(a.preventDefault(),1===a.touches.length)if(this.touch.isActive=!0,this.touch.start=a.touches[0].clientY,this.touch.previous=this.touch.start,this.touch.value=this.touch.start,this.touch.offset=0,this.velocity){this.touch.isAccellerating=!0;var b=this;this.touch.accellerateTimeout=setTimeout(function(){b.touch.isAccellerating=!1,b.velocity=0},500)}else this.velocity=0},h.prototype.onTouchMove=function(a){if(1===a.touches.length){var b=this.touch.value;this.touch.value=a.touches[0].clientY,this.touch.lastMove=Date.now();var c=this.touch.value>this.touch.previous&&this.velocity<0||this.touch.value<this.touch.previous&&this.velocity>0;this.touch.isAccellerating&&c?(clearInterval(this.touch.accellerateTimeout),this.velocity+=(this.touch.previous-this.touch.value)/10):(this.velocity=0,this.touch.isAccellerating=!1,this.touch.offset=Math.round(this.touch.start-this.touch.value)),this.touch.previous=b}},h.prototype.onTouchEnd=function(a){var b=this.touch.start-this.touch.value;this.touch.isAccellerating||(this.velocity=(this.touch.start-this.touch.value)/10),(Date.now()-this.touch.lastMove>200||Math.abs(this.touch.previous-this.touch.value)<5)&&(this.velocity=0),this.top.value+=this.touch.offset,this.touch.offset=0,this.touch.start=0,this.touch.value=0,this.touch.isActive=!1,this.touch.isAccellerating=!1,clearInterval(this.touch.accellerateTimeout),(Math.abs(this.velocity)>4||Math.abs(b)>10)&&a.preventDefault()},h.prototype.update=function(a){var b=this.top.value+this.velocity+this.touch.offset;if((this.velocity||this.touch.offset)&&(this.element.scrollTop=b,b=Math.max(0,Math.min(this.element.scrollTop,this.top.max)),this.top.value=b-this.touch.offset),(!this.touch.isActive||this.touch.isAccellerating)&&(this.velocity*=.95),Math.abs(this.velocity)<.15&&(this.velocity=0),b!==this.top.natural||a){this.top.natural=b,this.top.value=b-this.touch.offset;for(var c=b+this.listHeight,d=0,e=this.items.length;e>d;d++){var f=this.items[d];f._offsetBottom<b?this.velocity<=0&&"past"!==f._state&&(f.classList.add("past"),f._state="past"):f._offsetTop>c?this.velocity>=0&&"future"!==f._state&&(f.classList.add("future"),f._state="future"):f._state&&("past"===f._state&&f.classList.remove("past"),"future"===f._state&&f.classList.remove("future"),f._state="")}}},h.prototype.destroy=function(){g.prototype.destroy.apply(this),this.element.removeEventListener("touchstart",this.touchStartDelegate,!1),this.element.removeEventListener("touchmove",this.touchMoveDelegate,!1),this.element.removeEventListener("touchend",this.touchEndDelegate,!1)},window.stroll={bind:function(a,c){f()&&e(a,b,c)},unbind:function(a){f()&&e(a,c)}},window.requestAnimFrame=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(a){window.setTimeout(a,1e3/60)}}()}();